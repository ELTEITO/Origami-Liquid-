<!-- Modal Unificado para Crear/Editar Producto -->
<div class="modal" id="productModal">
  <div class="modal-content">
    <div class="modal-header">
      <h3 id="modalTitle">Nuevo Producto</h3>
      <button class="modal-close" onclick="closeProductModal()">
        <i class="fa-solid fa-times"></i>
      </button>
    </div>

    <form id="productForm" class="admin-form">
      <input type="hidden" id="productId" />
      <input type="hidden" id="isEditMode" value="false" />

      <!-- Información Básica -->
      <div class="form-section">
        <h4 class="section-title">
          <i class="fa-solid fa-info-circle"></i>
          Información Básica
        </h4>

        <div class="form-row">
          <!-- <div class="form-field">
            <label for="productName">Nombre del Producto *</label>
            <input type="text" id="productName" name="name" required placeholder="Ej: iPhone 17 Pro">
          </div> -->
          <div class="form-field">
            <label for="productBrand">Marca *</label>
            <select id="productBrand" name="brand" required>
              <option value="">Seleccionar marca</option>
            </select>
          </div>
        </div>

        <div class="form-row">
          <div class="form-field">
            <label for="productModel">Modelo *</label>
            <input
              type="text"
              id="productModel"
              name="model"
              required
              placeholder="Ej: iPhone 17 Pro"
            />
          </div>
          <div class="form-field">
            <label for="productCategory">Categoría *</label>
            <select id="productCategory" name="categoryId" required>
              <option value="">Seleccionar categoría</option>
            </select>
          </div>
        </div>

        <div class="form-field">
          <label for="productDescription">Descripción</label>
          <textarea
            id="productDescription"
            name="description"
            rows="3"
            placeholder="Descripción detallada del producto..."
          ></textarea>
        </div>
      </div>

      <!-- Precio y Estado -->
      <div class="form-section">
        <h4 class="section-title">
          <i class="fa-solid fa-dollar-sign"></i>
          Precio y Estado
        </h4>

        <div class="form-row">
          <div class="form-field">
            <label for="productStatus">Estado *</label>
            <select id="productStatus" name="status" required>
              <option value="active">Activo</option>
              <option value="inactive">Inactivo</option>
              <option value="draft">Borrador</option>
            </select>
          </div>
        </div>
      </div>

      <!-- Imagen del Producto -->
      <div class="form-section">
        <h4 class="section-title">
          <i class="fa-solid fa-image"></i>
          Imagen del Producto
        </h4>

        <div class="form-field">
          <label for="productImageFile">Imagen (local) *</label>
          <input
            type="file"
            id="productImageFile"
            name="imageFile"
            accept="image/*"
            required
          />
        </div>

        <div class="form-field">
          <label>Vista Previa</label>
          <div class="image-preview-container">
            <img
              id="imagePreview"
              src=""
              alt="Vista previa"
              style="display: none; max-width: 200px; border-radius: 8px"
            />
            <div id="noImagePlaceholder" class="no-image-placeholder">
              <i class="fa-solid fa-image"></i>
              <p>No hay imagen</p>
            </div>
          </div>
        </div>
      </div>

      <!-- Información Adicional (Solo para Editar) -->
      <div class="form-section" id="additionalInfo" style="display: none">
        <h4 class="section-title">
          <i class="fa-solid fa-clock"></i>
          Información del Sistema
        </h4>

        <div class="form-row">
          <div class="form-field">
            <label>Fecha de Creación</label>
            <input type="text" id="createdAt" readonly class="readonly-field" />
          </div>
          <div class="form-field">
            <label>Última Modificación</label>
            <input type="text" id="updatedAt" readonly class="readonly-field" />
          </div>
        </div>
      </div>

      <!-- Acciones del Formulario -->
      <div class="form-actions">
        <button
          type="button"
          class="btn btn-secondary"
          onclick="closeProductModal()"
        >
          <i class="fa-solid fa-times"></i>
          Cancelar
        </button>
        <button type="submit" class="btn btn-primary" id="submitBtn">
          <i class="fa-solid fa-save"></i>
          <span id="submitText">Crear Producto</span>
        </button>
      </div>
    </form>
  </div>
</div>
