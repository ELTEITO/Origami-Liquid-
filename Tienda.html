<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Tienda | Origami</title>
  <link rel="stylesheet" href="Liquid1.css">
  <link rel="stylesheet" href="Footer/footer.css">
  <link rel="stylesheet" href="tienda.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
</head>
<body>
  <div id="navbar-placeholder"></div>

  <main class="store wrap">
    <!-- Sidebar izquierda -->
    <aside class="filters glass-effect">
      <h3>Busqueda</h3>

      <label class="block">
        <span>Buscar modelo</span>
        <input id="fSearch" type="search" placeholder="Ej: 17, S25, Edge">
      </label>

 <!-- Capacidad -->
<div class="dropdown" id="capDD">
  <div class="dropdown-btn">Todas <span>▾</span></div>
  <div class="dropdown-list">
    <div class="dropdown-item" data-val="">Todas</div>
    <div class="dropdown-item" data-val="128GB">128GB</div>
    <div class="dropdown-item" data-val="256GB">256GB</div>
    <div class="dropdown-item" data-val="512GB">512GB</div>
  </div>
</div>

<!-- Marca -->
<div class="dropdown" id="brandDD">
  <div class="dropdown-btn">Marca <span>▾</span></div>
  <div class="dropdown-list">
    <div class="dropdown-item" data-val="">Todas</div>
    <div class="dropdown-item" data-val="motorola">Motorola</div>
    <div class="dropdown-item" data-val="samsung">Samsung</div>
    <div class="dropdown-item" data-val="iphone">iPhone</div>
    <div class="dropdown-item" data-val="xiaomi">Xiaomi</div>
  </div>
</div>

<div class="quickcats">
  <button class="chip is-active" data-type="">Todos</button>
  <button class="chip" data-type="celulares">Celulares</button>
  <button class="chip" data-type="accesorios">Accesorios</button>
  <button class="chip" data-type="notebooks">Notebooks</button>
  <button class="chip" data-type="productos">Productos</button>
</div>
    </aside>

    <!-- Contenido -->
    <section class="store-content">
      <h2 class="title"></h2>

      <div id="grid" class="grid">
        <!-- 12+ productos. Estructura repetible -->
        <article class="card glass-effect" data-model="iPhone 17" data-capacity="256GB" data-cat="iphone" data-type="celulares"  onclick="window.location.href='Publi.html'">
          <h3 class="card__title">iPhone 17</h3>
          <figure class="card__media"><img src="https://media.bananacomputer.com/iPhone_17_White_2-up_Screen__USEN.png" alt=""></figure>
          <p class="card__desc">iPhone 17 </p>
          <div class="card__price">$1299</div>
        </article>

        <article class="card glass-effect" data-model="iPhone 17 Air" data-capacity="256GB" data-cat="iphone" data-type="celulares">
          <h3 class="card__title">iPhone 17 Air</h3>
          <figure class="card__media"><img src="https://media.bananacomputer.com/iPhone_Air_Cloud_White_3-up_Screen__USEN.png" alt=""></figure>
          <p class="card__desc">Air 256GB</p>
          <div class="card__price">$1199</div>
        </article>

        <article class="card glass-effect" data-model="iPhone 17 Pro" data-capacity="512GB" data-cat="iphone" data-type="celulares">
          <h3 class="card__title">iPhone 17 Pro</h3>
          <figure class="card__media"><img src="https://media.bananacomputer.com/iPhone_17_Pro_Silver_2-up_Screen__USEN.png" alt=""></figure>
          <p class="card__desc">Pro 512GB</p>
          <div class="card__price">$1499</div>
        </article>

        <article class="card glass-effect" data-model="Samsung S25" data-capacity="256GB" data-cat="samsung" data-type="celulares">
          <h3 class="card__title">Samsung S25</h3>
          <figure class="card__media"><img src="https://images.samsung.com/is/image/samsung/assets/global/galaxy-s23/galaxy-s23_highlights_kv_mo.jpg?$ORIGIN_JPG$" alt=""></figure>
          <p class="card__desc">S25 256GB</p>
          <div class="card__price">$1099</div>
        </article>

        <article class="card glass-effect" data-model="Samsung S25 Ultra" data-capacity="512GB" data-cat="samsung" data-type="celulares">
          <h3 class="card__title">Samsung S25 Ultra</h3>
          <figure class="card__media"><img src="https://images.samsung.com/is/image/samsung/assets/global/galaxy-s23/galaxy-s23_highlights_kv_mo.jpg?$ORIGIN_JPG$" alt=""></figure>
          <p class="card__desc">Ultra 512GB</p>
          <div class="card__price">$1399</div>
        </article>

        <article class="card glass-effect" data-model="Motorola Edge" data-capacity="256GB" data-cat="motorola" data-type="celulares">
          <h3 class="card__title">Motorola Edge</h3>
          <figure class="card__media"><img src="https://motorola-global-portal.custhelp.com/euf/assets/images/edge/edge30_ultra.png" alt=""></figure>
          <p class="card__desc">Edge 256GB</p>
          <div class="card__price">$899</div>
        </article>

        <article class="card glass-effect" data-model="Motorola G85" data-capacity="128GB" data-cat="motorola" data-type="celulares">
          <h3 class="card__title">Motorola G85</h3>
          <figure class="card__media"><img src="https://motorola-global-portal.custhelp.com/euf/assets/images/edge/edge30_ultra.png" alt=""></figure>
          <p class="card__desc">G85 128GB</p>
          <div class="card__price">$499</div>
        </article>

        <article class="card glass-effect" data-model="Xiaomi 14" data-capacity="256GB" data-cat="xiaomi" data-type="celulares">
          <h3 class="card__title">Xiaomi 14</h3>
          <figure class="card__media"><img src="https://i02.appmifile.com/mi-com-product/fly-birds/xiaomi-14-pro/pc/images/section-05-img-01.png" alt=""></figure>
          <p class="card__desc">14 256GB</p>
          <div class="card__price">$899</div>
        </article>

        <article class="card glass-effect" data-model="Xiaomi 14 Ultra" data-capacity="512GB" data-cat="xiaomi" data-type="celulares">
          <h3 class="card__title">Xiaomi 14 Ultra</h3>
          <figure class="card__media"><img src="https://i02.appmifile.com/mi-com-product/fly-birds/xiaomi-14-pro/pc/images/section-05-img-01.png" alt=""></figure>
          <p class="card__desc">Ultra 512GB</p>
          <div class="card__price">$1199</div>
        </article>
        <!-- duplica hasta tener 12+ -->
        <article class="card glass-effect" data-model="iPhone 15" data-capacity="128GB" data-cat="iphone" data-type="celulares">
          <h3 class="card__title">iPhone 15</h3>
          <figure class="card__media"><img src="https://store.storeimages.cdn-apple.com/4982/as-images.apple.com/is/iphone-15-og-202309?wid=1200&hei=630&fmt=jpeg&qlt=95&.v=1693086365012" alt=""></figure>
          <p class="card__desc">15 128GB</p>
          <div class="card__price">$799</div>
        </article>

        <article class="card glass-effect" data-model="Moto Razr" data-capacity="256GB" data-cat="motorola" data-type="celulares" >
          <h3 class="card__title">Moto Razr</h3>
          <figure class="card__media"><img src="https://motorolaus.vtexassets.com/arquivos/ids/157088-800-auto?v=638350216331070000&width=800&height=auto&aspect=true" alt=""></figure>
          <p class="card__desc">Razr 256GB</p>
          <div class="card__price">$999</div>
        </article>

        <article class="card glass-effect" data-model="iPhone 17" data-capacity="128GB" data-cat="iphone" data-type="celulares">
          <h3 class="card__title">iPhone 17</h3>
          <figure class="card__media"><img src="https://media.bananacomputer.com/iPhone_17_White_2-up_Screen__USEN.png" alt=""></figure>
          <p class="card__desc">17 128GB</p>
          <div class="card__price">$1099</div>
        </article>
 
        <article class="card glass-effect" data-model="Xiaomi 13" data-capacity="128GB" data-cat="xiaomi" data-type="celulares">
          <h3 class="card__title">Xiaomi 13</h3>
          <figure class="card__media"><img src="https://i02.appmifile.com/mi-com-product/fly-birds/xiaomi-14-pro/pc/images/section-05-img-01.png" alt=""></figure>
          <p class="card__desc">13 128GB</p>
          <div class="card__price">$599</div>
        </article>

        <article class="card glass-effect" data-model="INTEL I9" data-capacity="128GB" data-cat="xiaomi" data-type="notebooks">
          <h3 class="card__title">INTEL I9</h3>
          <figure class="card__media"><img src="https://www.stec.com.ar/cdn/shop/files/IdeaPad_Slim_3_15IAH8_CT1_03.png?v=1734566958&width=2048" alt=""></figure>
          <p class="card__desc">13 128GB</p>
          <div class="card__price">$599</div>
        </article>
      </div>

      <!-- paginación -->
      <nav id="pager" class="pager"></nav>
    </section>
  </main>

  <div id="footer-placeholder"></div>
  <script src="js/store-integration.js"></script>
<script>
  // Carga Navbar y Footer
  fetch("Navbar/navbar.html")
    .then(r=>r.text())
    .then(h=>{ document.getElementById("navbar-placeholder").innerHTML = h; });

  fetch("Footer/footer.html")
    .then(r=>r.text())
    .then(h=>{ document.getElementById("footer-placeholder").innerHTML = h; });
</script>
  
<script>
  // -------- refs ----------
  const q     = document.getElementById('fSearch');
  const grid  = document.getElementById('grid');
  const pager = document.getElementById('pager');
  const all   = [...grid.querySelectorAll('.card')];

  // -------- estado ----------
  let page = 1;
  const pageSize = 9;          // 4x3  (usa 9 para 3x3)
  let qVal = '';
  let capVal = '';
  let brandVal = '';
  let activeType = '';          // '', 'celulares', 'accesorios', 'notebooks', 'productos'

  // -------- dropdown glass ----------
  function wireDropdown(id, onSelect){
    const dd  = document.getElementById(id);
    const btn = dd.querySelector('.dropdown-btn');
    const list= dd.querySelector('.dropdown-list');
    btn.addEventListener('click', ()=> dd.classList.toggle('open'));
    list.addEventListener('click', e=>{
      const it = e.target.closest('.dropdown-item'); if(!it) return;
      btn.innerHTML = `${it.textContent} <span>▾</span>`;
      dd.classList.remove('open');
      onSelect(it.dataset.val || "");
      page = 1; render();
    });
    document.addEventListener('click', e=>{ if(!dd.contains(e.target)) dd.classList.remove('open'); });
  }
  wireDropdown('capDD',   v => capVal   = v);
  wireDropdown('brandDD', v => brandVal = v);

  // -------- chips ----------
  all.forEach(el => { if(!el.dataset.type) el.dataset.type = 'celulares'; });
  document.querySelectorAll('.quickcats .chip').forEach(ch=>{
    ch.addEventListener('click', ()=>{
      document.querySelectorAll('.quickcats .chip').forEach(x=>x.classList.remove('is-active'));
      ch.classList.add('is-active');
      activeType = ch.dataset.type || '';
      page = 1; render();
    });
  });

  // -------- texto ----------
  q?.addEventListener('input', ()=>{
    qVal = q.value.trim().toLowerCase();
    page = 1; render();
  });

  // -------- filtros ----------
  function applyFilters(){
    return all.filter(el=>{
      const model = (el.dataset.model    || '').toLowerCase();
      const cap   = (el.dataset.capacity || '');
      const brand = (el.dataset.cat      || '').toLowerCase();
      const type  = (el.dataset.type     || 'celulares');

      const okText  = !qVal      || model.includes(qVal);
      const okCap   = !capVal    || cap === capVal;
      const okBrand = !brandVal  || brand === brandVal;
      const okType  = !activeType|| type === activeType;

      return okText && okCap && okBrand && okType;
    });
  }

  // -------- render + paginación ----------
  function render(){
    const items = applyFilters();
    const pages = Math.max(1, Math.ceil(items.length / pageSize));
    page = Math.min(page, pages);

    all.forEach(el => el.style.display = 'none');
    items.slice((page-1)*pageSize, page*pageSize).forEach(el => el.style.display = '');

    pager.innerHTML = '';
    const mk = (lbl, p, dis=false)=>{
      const b = document.createElement('button');
      b.className = 'pager__btn glass-circle' + (p===page ? ' is-active' : '');
      b.textContent = lbl; if(dis) b.disabled = true;
      b.onclick = ()=>{ page = p; render(); };
      return b;
    };
    pager.appendChild(mk('‹', Math.max(1, page-1), page===1));
    for(let i=1;i<=pages;i++) pager.appendChild(mk(i, i));
    pager.appendChild(mk('›', Math.min(pages, page+1), page===pages));
    pager.style.display = (pages > 1) ? 'flex' : 'none';
  }

  render();
</script>
</body>
</html>
