<header class="header-bar">
  <h1 style="display: flex; align-items: center; gap: 0.5rem; margin: 0">
    <span
      class="logo-circle"
      aria-hidden="true"
      style="
        width: 36px;
        height: 36px;
        border-radius: 50%;
        display: inline-block;
        background: url(../img/Origami.jpeg) center/cover;
        overflow: hidden;
      "
    >
    </span>
    <a href="../Liquid1.html" style="text-decoration: none; color: inherit"
      >Origami</a
    >
  </h1>

  <nav class="nav-bar">
    <a href="../Tienda.html">Tienda</a>
    <a href="../Nosotros/nosotros.html">Contacto</a>
    <a class="carrito" id="cartButton" aria-label="Carrito" href="javascript:void(0)">
      <i class="fa-solid fa-cart-shopping"></i>
      <span id="cartCount" class="cart-badge" aria-live="polite">0</span>
    </a>
    <div class="nav-search">
      <input
        id="search"
        class="nav-search__input"
        type="search"
        placeholder="Buscar…"
      />
      <label for="search" class="nav-search__btn">
        <i class="fa-solid fa-magnifying-glass"></i>
      </label>
    </div>
    <!-- Nuevo: Inicio de sesión -->
    <a href="../auth/login.html" class="btn-login" id="authButton" aria-label="Iniciar sesión">
      <i class="fa-regular fa-user"></i>
      <span class="btn-login__label">Iniciar sesión</span>
    </a>
  </nav>
</header>

<script>
document.addEventListener('DOMContentLoaded', function() {
    const authButton = document.getElementById('authButton');

    // Verificar múltiples posibles nombres de keys
    const token = localStorage.getItem('token') ||
                  localStorage.getItem('authToken') ||
                  localStorage.getItem('jwt') ||
                  localStorage.getItem('accessToken') ||
                  sessionStorage.getItem('token') ||
                  sessionStorage.getItem('authToken');

    console.log('Token encontrado:', token); // Para debug
    console.log('LocalStorage keys:', Object.keys(localStorage)); // Para debug

    if (token && token !== 'null' && token !== '') {
        // Usuario logueado - cambiar a "Volver al Panel"
        authButton.href = '../admin/dashboard.html';
        authButton.setAttribute('aria-label', 'Volver al Panel');
        authButton.querySelector('.btn-login__label').textContent = 'Volver al Panel';
        authButton.querySelector('i').className = 'fa-solid fa-gauge';
        console.log('Botón actualizado a "Ir al Panel"');
    } else {
        console.log('No hay token válido encontrado');
    }
});
</script>
